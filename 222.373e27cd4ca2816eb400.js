(window.webpackJsonpngx_snake=window.webpackJsonpngx_snake||[]).push([[222,179],{222:(t,e,s)=>{"use strict";let r;function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.r(e),s.d(e,{CustomStrategy:()=>o,FieldTraverser:()=>n}),function(t){t[t.left=37]="left",t[t.up=38]="up",t[t.right=39]="right",t[t.down=40]="down"}(r||(r={}));class o{constructor(){i(this,"steps",0),i(this,"current",r.left)}step(t){const e=new n,s=[...t.obstacles,...t.snake.parts.slice(1)];return e.getDirections(t.snake.parts[0],t.fruit,s)[0]}}class n{constructor(){i(this,"traversalQueue",void 0),i(this,"visitedWithPrev",void 0)}getDirections(t,e,s){const r=this.asPrimitive(t),i=this.asPrimitive(e),o=s.map(t=>this.asPrimitive(t));try{return this.traverse(r,i,o),this.reconstructPathTo(i)}catch(t){const e=Array.from(this.visitedWithPrev)[this.visitedWithPrev.size-1][0];return this.reconstructPathTo(e)}}asPrimitive(t){return t.x+t.y*n.FIELD_WIDTH}traverse(t,e,s){for(this.traversalQueue=[{pos:t,dist:0,prev:null}],this.visitedWithPrev=new Map(s.map(t=>[t,null]));;){let t=this.traversalQueue.shift();if(void 0===t)throw new Error("Found no valid path");if(this.visitedWithPrev.has(t.pos)||this.visit(t),t.pos===e)return t}}visit({pos:t,dist:e,prev:s}){this.visitedWithPrev.set(t,s),this.traversalQueue.push({pos:this.goRight(t),dist:e+1,prev:t}),this.traversalQueue.push({pos:this.goLeft(t),dist:e+1,prev:t}),this.traversalQueue.push({pos:this.goDown(t),dist:e+1,prev:t}),this.traversalQueue.push({pos:this.goUp(t),dist:e+1,prev:t})}goRight(t){return(t+1)%n.FIELD_WIDTH+Math.floor(t/n.FIELD_WIDTH)*n.FIELD_WIDTH}goLeft(t){return(t+n.FIELD_WIDTH-1)%n.FIELD_WIDTH+Math.floor(t/n.FIELD_WIDTH)*n.FIELD_WIDTH}goDown(t){return(t+n.FIELD_WIDTH)%(n.FIELD_WIDTH*n.FIELD_HEIGHT)}goUp(t){return(t+(n.FIELD_HEIGHT-1)*n.FIELD_WIDTH)%(n.FIELD_WIDTH*n.FIELD_HEIGHT)}reconstructPathTo(t){const e=[];let s,r=t;for(;;){if(s=this.visitedWithPrev.get(r),null===s)return e;e.unshift(this.getDirection(s,r)),r=s}}getDirection(t,e){switch(e-t){case 1:case 1-n.FIELD_WIDTH:return r.right;case-1:case n.FIELD_WIDTH-1:return r.left;case n.FIELD_WIDTH:case(1-n.FIELD_HEIGHT)*n.FIELD_WIDTH:return r.down;case-n.FIELD_WIDTH:case(n.FIELD_HEIGHT-1)*n.FIELD_WIDTH:return r.up;default:throw Error(`Invalid movement detected: ${t} to ${e}.`)}}}i(n,"FIELD_WIDTH",18),i(n,"FIELD_HEIGHT",18)}}]);